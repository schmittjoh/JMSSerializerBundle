<?xml version="1.0" encoding="UTF-8"?>

<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <parameters>
        <parameter key="jms_serializer.camel_case_naming_strategy.class">JMS\SerializerBundle\Serializer\Naming\CamelCaseNamingStrategy</parameter>
        <parameter key="jms_serializer.annotated_naming_strategy.class">JMS\SerializerBundle\Serializer\Naming\AnnotatedNamingStrategy</parameter>
        
        <parameter key="jms_serializer.serializer_factory.class">JMS\SerializerBundle\Serializer\SerializerFactory</parameter>
        
        <parameter key="jms_serializer.annotation_reader.class">Doctrine\Common\Annotations\AnnotationReader</parameter>
        
        <parameter key="jms_serializer.xml_encoder.class">Symfony\Component\Serializer\Encoder\XmlEncoder</parameter>
        <parameter key="jms_serializer.json_encoder.class">Symfony\Component\Serializer\Encoder\JsonEncoder</parameter>
    </parameters>

    <services>
        <service id="jms_serializer.camel_case_naming_strategy" class="%jms_serializer.camel_case_naming_strategy.class%" public="false" />
        <service id="jms_serializer.annotated_naming_strategy" class="%jms_serializer.annotated_naming_strategy.class%" public="false">
            <argument type="service" id="jms_serializer.annotation_reader" />
            <argument type="service" id="jms_serializer.camel_case_naming_strategy" />
        </service>
    
        <service id="jms_serializer.serializer_factory" class="%jms_serializer.serializer_factory.class%" public="false">
            <argument type="service" id="jms_serializer.annotation_reader" />
            <argument type="service" id="jms_serializer.annotated_naming_strategy" />
        </service>
        <service id="serializer_factory" alias="jms_serializer.serializer_factory" />
        
        <service id="jms_serializer.serializer" class="Symfony\Component\Serializer\Serializer" public="false" factory-service="jms_serializer.serializer_factory" factory-method="getSerializer" />
        <service id="serializer" alias="jms_serializer.serializer" />
        
        <service id="jms_serializer.annotation_reader" class="%jms_serializer.annotation_reader.class%" public="false">
            <call method="setDefaultAnnotationNamespace">
                <argument>JMS\SerializerBundle\Annotation\</argument>
            </call>
            <call method="setAutoloadAnnotations">
                <argument>true</argument>
            </call>
        </service>
        
        <service id="jms_serializer.xml_encoder" class="%jms_serializer.xml_encoder.class%" public="false" />
        <service id="jms_serializer.json_encoder" class="%jms_serializer.json_encoder.class%" public="false" />
    </services>

</container>
